#!/bin/bash

# Credentials and paths (replace with your values)
SFTP_HOST="your_sftp_hostname"
SFTP_USERNAME="your_sftp_username"
SFTP_PASSWORD="your_sftp_password"
LOCAL_FOLDER="/path/to/local/folder"
REMOTE_FOLDER="/path/to/remote/folder"

# Download a folder
function download_folder() {
  # Use sftp with additional debugging output
  sftp -oBatchMode=no -oStrictHostKeyChecking=no -vvv -b - $SFTP_USERNAME@$SFTP_HOST << EOF
  cd "$REMOTE_FOLDER"
  get -r * $LOCAL_FOLDER
EOF
}

# Upload a folder
function upload_folder() {
  # Use sftp with additional debugging output
  sftp -oBatchMode=no -oStrictHostKeyChecking=no -vvv -b - $SFTP_USERNAME@$SFTP_HOST << EOF
  cd "$REMOTE_FOLDER"
  put -r $LOCAL_FOLDER/* .
EOF
}

# Choose operation
operation="$1"

if [[ $operation == "download" ]]; then
  download_folder
elif [[ $operation == "upload" ]]; then
  upload_folder
else
  echo "Invalid operation. Please specify 'download' or 'upload'."
  exit 1
fi

exit 0

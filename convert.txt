from ruamel.yaml import YAML
from collections import defaultdict

# Original YAML data with duplicate keys
data = """
key1:
  - value1
  - value2
key2:
  - value3
  - value4
key1:
  - value5
"""

# Create a YAML object to handle the parsing
yaml = YAML()
yaml_data = yaml.load(data)

# Use a defaultdict to handle duplicate keys and merge their values into lists
result = defaultdict(list)

for key, value in yaml_data.items():
    result[key].extend(value)

# Convert the defaultdict to the desired format with square brackets
formatted_result = {k: f'["{", ".join(v)}"]' for k, v in result.items()}

# Print the formatted result
for key, value in formatted_result.items():
    print(f"{key}: {value}")
